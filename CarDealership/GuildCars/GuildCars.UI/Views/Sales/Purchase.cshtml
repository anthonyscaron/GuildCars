@model GuildCars.UI.Models.SalesPuchaseViewModel
@{
    ViewBag.Title = "Sales - Purchase";
}

<div class="col-xs-12">
    <div class="row">
        <div class="col-xs-12">
            <h1>Purchase Vehicle</h1>
        </div>
        <div class="col-xs-12" id="vehicleBorder">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3" >
                    <div class="row" id="picHeader">
                        <p>@Model.SearchVehicleRequestItem.Year.Year @Model.SearchVehicleRequestItem.MakeName @Model.SearchVehicleRequestItem.ModelName</p>
                    </div>
                    <div class="row" id="pic">
                        <img src="@Url.Content("~/ImagesPROD/" + Model.SearchVehicleRequestItem.Picture)" style="width:150px; height:150px" />
                    </div>
                </div>
                <div class="col-xs-12 col-sm-9 col-md-9">
                    <div class="row">
                        <div class="col-xs-12">
                            <p><br /></p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-4">
                            <p>Body Style: @Model.SearchVehicleRequestItem.BodyStyleName</p>
                        </div>
                        <div class="col-xs-4">
                            <p>Interior: @Model.SearchVehicleRequestItem.ColorIntName</p>
                        </div>
                        <div class="col-xs-4">
                            <p>Sale Price: $@Model.SearchVehicleRequestItem.SalePrice</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-4">
                            <p>Trans: @Model.SearchVehicleRequestItem.TransName</p>
                        </div>
                        <div class="col-xs-4">
                            <p>Mileage: @Model.SearchVehicleRequestItem.Mileage</p>
                        </div>
                        <div class="col-xs-4">
                            <p>MSRP: $@Model.SearchVehicleRequestItem.MSRP</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-4">
                            <p>Color: @Model.SearchVehicleRequestItem.ColorExName</p>
                        </div>
                        <div class="col-xs-4">
                            <p>Vin #: @Model.SearchVehicleRequestItem.VIN</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">
                            <p>Description: @Model.SearchVehicleRequestItem.Description</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        @if (!Model.SearchVehicleRequestItem.IsDeleted)
        {
            <div class="row">
                <div class="col-xs-12">
                    <h1>Sales Information</h1>
                </div>
                <div class="row">
                    @using (Html.BeginForm("Purchase", "Sales", FormMethod.Post, new { id = "formPurchaseVehicle" }))
                    {
                        @Html.ValidationSummary()
                        @Html.HiddenFor(m => m.SearchVehicleRequestItem.VehicleId)
                        @Html.HiddenFor(m=>m.SearchVehicleRequestItem.MSRP)
                        <div class="col-xs-12 col-sm-8 col-md-8">
                            <div class="row">
                                <div class="col-xs-12 col-sm-6 col-md-6">
                                    <div class="form-group">
                                        <label>Name</label>
                                        @Html.TextBoxFor(m => m.SaleRequestItem.SaleName, new { @class = "form-control" })
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-6 col-md-6">
                                    <div class="form-group">
                                        <label>Phone</label>
                                        @Html.TextBoxFor(m => m.SaleRequestItem.SalePhone, new { @class = "form-control" })
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12">
                                    <div class="form-group">
                                        <label>Email</label>
                                        @Html.TextBoxFor(m => m.SaleRequestItem.SaleEmail, new { @class = "form-control" })
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12 col-sm-6 col-md-6">
                                    <div class="form-group">
                                        <label>Street 1</label>
                                        @Html.TextBoxFor(m => m.SaleRequestItem.Street1, new { @class = "form-control" })
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-6 col-md-6">
                                    <div class="form-group">
                                        <label>Street 2</label>
                                        @Html.TextBoxFor(m => m.SaleRequestItem.Street2, new { @class = "form-control" })
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12 col-sm-6 col-md-6">
                                    <div class="form-group">
                                        <label>City</label>
                                        @Html.TextBoxFor(m => m.SaleRequestItem.City, new { @class = "form-control" })
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-2 col-md-2">
                                    <div class="form-group">
                                        <label>State</label>
                                        @Html.DropDownListFor(m => m.SaleRequestItem.StateAbbreviation, Model.States, new { @class = "form-control" })
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12 col-sm-6 col-md-6">
                                    <div class="form-group">
                                        <label>Zipcode</label>
                                        @Html.TextBoxFor(m => m.SaleRequestItem.Zipcode, new { @class = "form-control" })
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12">
                                    <hr />
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12 col-sm-6 col-md-6">
                                    <div class="form-group">
                                        <label>Purchase Price</label>
                                        @Html.TextBoxFor(m => m.SaleRequestItem.PurchasePrice, new { @class = "form-control" })
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-3 col-md-3">
                                    <div class="form-group">
                                        <label>Purchase Type</label>
                                        @Html.DropDownListFor(m => m.SaleRequestItem.PurchaseTypeName, Model.PurchaseTypes, new { @class = "form-control" })
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12 col-sm-6 col-md-6">
                                    <button class="btn btn-primary">Save</button>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        }
        @if (Model.SearchVehicleRequestItem.IsDeleted)
        {
            <div class="row">
                <div class="col-xs-10" style="text-align: center;">
                    <h4>Unavailable - Sold</h4>
                </div>
            </div>
        }
    </div>
</div>

@section Scripts
{
    <script>
        $(document).ready(function () {
            $('#formPurchaseVehicle').validate({
                rules: {
                    'SaleRequestItem.SaleName': {
                        required: true,
                        minlength: 1,
                        maxlength: 50
                    },
                    'SaleRequestItem.SaleEmail': {
                        required: '#SaleRequestItem_SalePhone:blank',
                        email: true,
                        minlength: 7,
                        maxlength: 50
                    },
                    'SaleRequestItem.SalePhone': {
                        required: '#SaleRequestItem_SaleEmail:blank',
                        number: true,
                        minlength: 10,
                        maxlength: 10
                    },
                    'SaleRequestItem.Street1': {
                        required: true,
                        minlength: 1,
                        maxlength: 50
                    },
                    'SaleRequestItem.City': {
                        required: true,
                        minlength: 1,
                        maxlength: 20,

                    },
                    'SaleRequestItem.StateAbbreviation': {
                        required: true
                    },
                    'SaleRequestItem.Zipcode': {
                        required: true,
                        minlength: 5,
                        maxlength: 5
                    },
                    'SaleRequestItem.PurchasePrice': {
                        required: true,
                        range: [(@Model.SearchVehicleRequestItem.MSRP * 0.95), @Model.SearchVehicleRequestItem.MSRP]
                    },
                    'SaleRequestItem.PurchaseTypeName': {
                        required: true
                    }
                }
            })
        })
    </script>
}